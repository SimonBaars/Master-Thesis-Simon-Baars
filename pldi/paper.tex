%% For double-blind review submission, w/o CCS and ACM Reference (max submission space)
\documentclass[sigplan,10pt,review,anonymous]{acmart}
\settopmatter{printfolios=true,printccs=false,printacmref=false}
%% For double-blind review submission, w/ CCS and ACM Reference
%\documentclass[sigplan,review,anonymous]{acmart}\settopmatter{printfolios=true}
%% For single-blind review submission, w/o CCS and ACM Reference (max submission space)
%\documentclass[sigplan,review]{acmart}\settopmatter{printfolios=true,printccs=false,printacmref=false}
%% For single-blind review submission, w/ CCS and ACM Reference
%\documentclass[sigplan,review]{acmart}\settopmatter{printfolios=true}
%% For final camera-ready submission, w/ required CCS and ACM Reference
%\documentclass[sigplan]{acmart}\settopmatter{}


%% Conference information
%% Supplied to authors by publisher for camera-ready submission;
%% use defaults for review submission.
\acmConference[PL'18]{ACM SIGPLAN Conference on Programming Languages}{January 01--03, 2018}{New York, NY, USA}
\acmYear{2018}
\acmISBN{} % \acmISBN{978-x-xxxx-xxxx-x/YY/MM}
\acmDOI{} % \acmDOI{10.1145/nnnnnnn.nnnnnnn}
\startPage{1}

%% Copyright information
%% Supplied to authors (based on authors' rights management selection;
%% see authors.acm.org) by publisher for camera-ready submission;
%% use 'none' for review submission.
\setcopyright{none}
%\setcopyright{acmcopyright}
%\setcopyright{acmlicensed}
%\setcopyright{rightsretained}
%\copyrightyear{2018}           %% If different from \acmYear

%% Bibliography style
\bibliographystyle{ACM-Reference-Format}
%% Citation style
%\citestyle{acmauthoryear}  %% For author/year citations
%\citestyle{acmnumeric}     %% For numeric citations
%\setcitestyle{nosort}      %% With 'acmnumeric', to disable automatic
                            %% sorting of references within a single citation;
                            %% e.g., \cite{Smith99,Carpenter05,Baker12}
                            %% rendered as [14,5,2] rather than [2,5,14].
%\setcitesyle{nocompress}   %% With 'acmnumeric', to disable automatic
                            %% compression of sequential references within a
                            %% single citation;
                            %% e.g., \cite{Baker12,Baker14,Baker16}
                            %% rendered as [2,3,4] rather than [2-4].


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Note: Authors migrating a paper from traditional SIGPLAN
%% proceedings format to PACMPL format must update the
%% '\documentclass' and topmatter commands above; see
%% 'acmart-pacmpl-template.tex'.
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


%% Some recommended packages.
\usepackage{booktabs}   %% For formal tables:
                        %% http://ctan.org/pkg/booktabs
\usepackage{subcaption} %% For complex figures with subfigures/subcaptions
                        %% http://ctan.org/pkg/subcaption

\usepackage{todonotes}

\usepackage{xcolor}
\usepackage{float}

\usepackage{graphicx}

\begin{document}

%% Title information
\title%[Short Title]
{A Code Clone Detection DSL for Java}         %% [Short Title] is optional;
                                        %% when present, will be used in
                                        %% header instead of Full Title.
%\titlenote{with title note}             %% \titlenote is optional;
                                        %% can be repeated if necessary;
                                        %% contents suppressed with 'anonymous'
%\subtitle{Subtitle}                     %% \subtitle is optional
%\subtitlenote{with subtitle note}       %% \subtitlenote is optional;
                                        %% can be repeated if necessary;
                                        %% contents suppressed with 'anonymous'


%% Author information
%% Contents and number of authors suppressed with 'anonymous'.
%% Each author should be introduced by \author, followed by
%% \authornote (optional), \orcid (optional), \affiliation, and
%% \email.
%% An author may have multiple affiliations and/or emails; repeat the
%% appropriate command.
%% Many elements are not rendered, but should be provided for metadata
%% extraction tools.

%% Author with single affiliation.
\author{Simon Baars}
%\authornote{with author1 note}          %% \authornote is optional;
                                        %% can be repeated if necessary
\orcid{nnnn-nnnn-nnnn-nnnn}             %% \orcid is optional
\affiliation{
  \position{Research Assistant}
  \department{Systems and Network Engineering Research Group}              %% \department is recommended
  \institution{University of Amsterdam}            %% \institution is required
  %\streetaddress{Street1 Address1}
  %\city{City1}
  %\state{State1}
  %\postcode{Post-Code1}
  \country{Amsterdam}                    %% \country is recommended
}
\email{simon.j.baars@gmail.com}          %% \email is recommended

%% Author with two affiliations and emails.
%\author{First2 Last2}
%\authornote{with author2 note}          %% \authornote is optional;
                                        %% can be repeated if necessary
%\orcid{nnnn-nnnn-nnnn-nnnn}             %% \orcid is optional
%\affiliation{
%  \position{Position2a}
%  \department{Department2a}             %% %%\department is recommended
 % \institution{Institution2a}           %% \institution is required
%  \streetaddress{Street2a Address2a}
%  \city{City2a}
%  \state{State2a}
%  \postcode{Post-Code2a}
%  \country{Country2a}                   %% \country is recommended
%}
% %\email{first2.last2@inst2a.com}         %% \email is recommended
% \affiliation{
%   \position{Position2b}
%   \department{Department2b}             %% \department is recommended
%   \institution{Institution2b}           %% \institution is required
%   \streetaddress{Street3b Address2b}
%   \city{City2b}
%   \state{State2b}
%   \postcode{Post-Code2b}
%   \country{Country2b}                   %% \country is recommended
% }
% \email{first2.last2@inst2b.org}         %% \email is recommended


%% Abstract
%% Note: \begin{abstract}...\end{abstract} environment must come
%% before \maketitle command
\begin{abstract}
Duplication in source code is generally considered an undesirable pattern, because it unnecessarily increases system volume and is prone to cause bugs. Many studies propose definitions and techniques to detect such duplication issues. The clones detected by these definitions and techniques differ greatly. This is because there is a trade-off between completeness and number of false-positives. Additionally, clone detection may have different purposes, which may require different clone detection techniques.

We propose a DSL for clone detection, that allows for the specification of clone definitions. Using this DSL, code clone definitions can be easily expressed, whilst not having to worry about the actual clone detection algorithm and its optimization. Our DSL allows to exclude expressions, statements and declarations from clone matching. Our DSL supports line-based and AST-based clone detection approaches. The DSL can also take into account context information of expressions.

We use the DSL to express type 1, 2 and 3 clone definitions. We then use these definitions to validate the DSL over a corpus of open-source Java projects. We compare these results with established clone detection tools. We find that our DSL matches the output of the control tools, while allowing for a much wider spectrum of configurations.
\end{abstract}


%% 2012 ACM Computing Classification System (CSS) concepts
%% Generate at 'http://dl.acm.org/ccs/ccs.cfm'.
\begin{CCSXML}
<ccs2012>
<concept>
<concept_id>10011007.10011006.10011008</concept_id>
<concept_desc>Software and its engineering~General programming languages</concept_desc>
<concept_significance>500</concept_significance>
</concept>
<concept>
<concept_id>10003456.10003457.10003521.10003525</concept_id>
<concept_desc>Social and professional topics~History of programming languages</concept_desc>
<concept_significance>300</concept_significance>
</concept>
</ccs2012>
\end{CCSXML}

\ccsdesc[500]{Software and its engineering~General programming languages}
\ccsdesc[300]{Social and professional topics~History of programming languages}
%% End of generated code


%% Keywords
%% comma separated list
\keywords{clone detection, domain specific language, language engineering, meta-programming}  %% \keywords are mandatory in final camera-ready submission


%% \maketitle
%% Note: \maketitle command must come after title commands, author
%% commands, abstract environment, Computing Classification System
%% environment and commands, and keywords command.
\maketitle


\section{Introduction}
Code clones argue about the duplicate code present in the source code of software systems. An abundant number of clone detection tools and techniques have been proposed in the literature due to the many applications and benefits of clone detection \cite{svajlenko2019mutation}. Clones are most often the result of code reuse by copying and pasting existing code, among other reasons \cite{roy2007survey}. Clones are often seen as harmful \cite{roy2007survey, ostberg2014automatically, juergens2009code}, but can also have positive effects on system maintainability \cite{roy2007survey, kapser2006cloning, aversano2007clones}.

Clone detection is applied in various domains. This includes (automated) refactoring, education (plagiarism detection) \cite{wahler2004clone}, (legacy code) modernization \cite{meng2013refactoring} and maintainability analysis \cite{heitlager2007practical}. For these varying purposes, many clone detection tools have been proposed: a 2013 survey by Rattan et al. \cite{rattan2013software} surveyed more than 70 clone detection tools. Comparisons show large differences in recall and precisions of these tools \cite{svajlenko2014evaluating}.

To allow easy experimentation with code clone defitions and methods, we propose a DSL to configure clone detection.

\section{Background}
We describe code clone definitions and techniques that are commonly used in code clone detection.

\subsection{Clone type definitions}
Most modern clone detection tools detect clones by the following clone type definitions \cite{svajlenko2014evaluating}:
\textbf{Type 1:} Code fragments that are syntactically identical, except for differences in white space, layout and comments.
\textbf{Type 2:} Code fragments that are syntactically identical, except for differences in identifier names, literal values, white space, layout and comments.
\textbf{Type 3:} Code fragments that are syntactically similar with differences at the statement level. The fragments may differ by the addition, removal or modification of statements.

\subsection{Clone detection techniques}


\section{Clone Detection Techniques Survey}
As an initial step towards creating a clone detection DSL, we surveyed clone detection techniques and tools to extract common functionalities.

\section{Language Design}
We propose Clone Detection DSL (CDD)\footnote{Link to the GitHub repository is omitted to adhere to the double-blind review rules. Link to full source code of the DSL will be included in the camera-ready version.}, a DSL that allows to build a clone detection script to analyze Java systems.

\subsection{Clone Size}
An important feature of many clone detection tools, to be able to find clones that have a high relevance, is to be able to configure what characteristics clones should have for them to be considered. Some clone detection tools use a threshold that specifies the minimum number of lines \cite{juergens2009clonedetective, ducasse1999language, cordy2011nicad, uddin2013simcad}. Other clone detection tools specify the minimum number of tokens \cite{kamiya2002ccfinder, toomey2012ctcompare, jiang2007deckard}. Some AST-based clone detectors use the minimum number of statements \cite{higo2009enhancing}.

Based on such thresholds, clones that are too small are filtered. How these thresholds are configured has a big impact on the results and their relevance \cite{roy2007survey}. Our DSL allows for any combination of metric values to configure the minimum size of a clone. For this, we introduce the \textbf{Size} keyword. This is an example of how the \textbf{Size} keyword can be configured:
\\
\textbf{\textcolor[HTML]{7F0055}{Size}} (\textcolor[HTML]{7D7D7D}{4} \textbf{\textcolor[HTML]{7F0055}{lines}} $\&$  \textcolor[HTML]{7D7D7D}{50} \textbf{\textcolor[HTML]{7F0055}{tokens}}) $ \vert $  (\textcolor[HTML]{7D7D7D}{6} \textbf{\textcolor[HTML]{7F0055}{lines}} $\&$  \textcolor[HTML]{7D7D7D}{40} \textbf{\textcolor[HTML]{7F0055}{tokens}})
\\


\subsection{Match Granularity}


\subsection{Exclusions}

\subsection{Compare Rules}

\section{Example scripts}

\section{Results}

\section{Discussion}

\section{Conclusion}

\subsection{Threats to validity}

% %% Acknowledgments
% \begin{acks}                            %% acks environment is optional
%                                         %% contents suppressed with 'anonymous'
%   %% Commands \grantsponsor{<sponsorID>}{<name>}{<url>} and
%   %% \grantnum[<url>]{<sponsorID>}{<number>} should be used to
%   %% acknowledge financial support and will be used by metadata
%   %% extraction tools.
%   This material is based upon work supported by the
%   \grantsponsor{GS100000001}{National Science
%     Foundation}{http://dx.doi.org/10.13039/100000001} under Grant
%   No.~\grantnum{GS100000001}{nnnnnnn} and Grant
%   No.~\grantnum{GS100000001}{mmmmmmm}.  Any opinions, findings, and
%   conclusions or recommendations expressed in this material are those
%   of the author and do not necessarily reflect the views of the
%   National Science Foundation.
% \end{acks}


%% Bibliography
%\bibliography{bibfile}


%% Appendix
% \appendix
% \section{Appendix}
%
% Text of appendix \ldots
\bibliography{references}

\end{document}
